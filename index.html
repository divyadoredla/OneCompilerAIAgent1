<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aurora Compile - Browser-first Web Compiler</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Theme toggle for initial load -->
  <script>
    // Prevent flash of unstyled content
    const savedTheme = localStorage.getItem('aurora-compile-theme') || 'system';
    const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    const theme = savedTheme === 'system' ? systemTheme : savedTheme;
    document.documentElement.setAttribute('data-theme', theme);
  </script>

  <div id="app" class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo">
          <span class="logo-text">Aurora Compile</span>
        </div>
      </div>
      
      <div class="header-center">
        <div class="toolbar">
          <button class="toolbar-btn toolbar-btn-primary" id="run-btn" title="Run (Ctrl+Enter)">
            <svg viewBox="0 0 24 24" class="icon">
              <polygon points="5,3 19,12 5,21" fill="currentColor"/>
            </svg>
            Run
          </button>
          <button class="toolbar-btn" id="build-btn" title="Build Project">
            <svg viewBox="0 0 24 24" class="icon">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
            Build
          </button>
          <button class="toolbar-btn" id="export-btn" title="Export (Ctrl+E)">
            <svg viewBox="0 0 24 24" class="icon">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Export
          </button>
          <div class="toolbar-separator"></div>
          <button class="toolbar-btn" id="templates-btn" title="Templates">
            <svg viewBox="0 0 24 24" class="icon">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" fill="none"/>
              <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </button>
        </div>
      </div>
      
      <div class="header-right">
        <button class="toolbar-btn" id="theme-toggle" title="Toggle Theme">
          <svg viewBox="0 0 24 24" class="icon theme-icon-light">
            <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2"/>
          </svg>
          <svg viewBox="0 0 24 24" class="icon theme-icon-dark">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
        </button>
        <button class="toolbar-btn" id="help-btn" title="Help">
          <svg viewBox="0 0 24 24" class="icon">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" stroke="currentColor" stroke-width="2" fill="none"/>
            <circle cx="12" cy="17" r="1" fill="currentColor"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h3>Files</h3>
          <div class="sidebar-actions">
            <button class="icon-btn" id="new-file-btn" title="New File">
              <svg viewBox="0 0 24 24" class="icon">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" fill="none"/>
                <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" fill="none"/>
                <line x1="12" y1="18" x2="12" y2="12" stroke="currentColor" stroke-width="2"/>
                <line x1="9" y1="15" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="icon-btn" id="upload-btn" title="Upload Files">
              <svg viewBox="0 0 24 24" class="icon">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" fill="none"/>
                <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" fill="none"/>
                <line x1="12" y1="11" x2="12" y2="17" stroke="currentColor" stroke-width="2"/>
                <polyline points="9,14 12,11 15,14" stroke="currentColor" stroke-width="2" fill="none"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="file-tree" id="file-tree">
          <!-- File tree will be populated by JavaScript -->
        </div>
      </aside>

      <!-- Editor Panel -->
      <section class="editor-panel" id="editor-panel">
        <div class="editor-tabs" id="editor-tabs">
          <!-- Tabs will be populated by JavaScript -->
        </div>
        <div class="editor-container">
          <div id="monaco-editor" class="monaco-container"></div>
          <div class="editor-status" id="editor-status">
            <span class="status-info">Ready</span>
            <span class="cursor-position">Ln 1, Col 1</span>
          </div>
        </div>
      </section>

      <!-- Preview Panel -->
      <section class="preview-panel" id="preview-panel">
        <div class="preview-header">
          <div class="preview-controls">
            <select class="device-selector" id="device-selector">
              <option value="desktop">Desktop</option>
              <option value="tablet">Tablet</option>
              <option value="mobile">Mobile</option>
            </select>
            <div class="preview-actions">
              <label class="toggle-switch">
                <input type="checkbox" id="hot-reload-toggle" checked>
                <span class="toggle-slider"></span>
                <span class="toggle-label">Hot Reload</span>
              </label>
              <button class="icon-btn" id="preview-refresh" title="Refresh Preview">
                <svg viewBox="0 0 24 24" class="icon">
                  <polyline points="23 4 23 10 17 10" stroke="currentColor" stroke-width="2" fill="none"/>
                  <polyline points="1 20 1 14 7 14" stroke="currentColor" stroke-width="2" fill="none"/>
                  <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
              </button>
              <button class="icon-btn" id="preview-external" title="Open in New Tab">
                <svg viewBox="0 0 24 24" class="icon">
                  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" stroke="currentColor" stroke-width="2" fill="none"/>
                  <polyline points="15,3 21,3 21,9" stroke="currentColor" stroke-width="2" fill="none"/>
                  <line x1="10" y1="14" x2="21" y2="3" stroke="currentColor" stroke-width="2"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
        <div class="preview-container" id="preview-container">
          <iframe id="preview-iframe" sandbox="allow-scripts allow-same-origin" class="preview-iframe"></iframe>
        </div>
      </section>
    </main>

    <!-- Console Panel -->
    <section class="console-panel" id="console-panel">
      <div class="console-header">
        <div class="console-tabs">
          <button class="console-tab active" data-tab="console">Console</button>
          <button class="console-tab" data-tab="build">Build Output</button>
        </div>
        <div class="console-actions">
          <button class="icon-btn" id="clear-console" title="Clear Console">
            <svg viewBox="0 0 24 24" class="icon">
              <polyline points="3 6 5 6 21 6" stroke="currentColor" stroke-width="2"/>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </button>
          <button class="icon-btn" id="toggle-console" title="Toggle Console">
            <svg viewBox="0 0 24 24" class="icon">
              <polyline points="6 9 12 15 18 9" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="console-content">
        <div class="console-output" id="console-output">
          <div class="console-message console-info">
            <span class="console-timestamp">[00:00:00]</span>
            <span class="console-text">üåÖ Aurora Compile ready - Your sandbox is loaded!</span>
          </div>
        </div>
        <div class="build-output" id="build-output" style="display: none;">
          <div class="build-message">
            <span class="build-text">Ready to build...</span>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Modals -->
  <!-- Onboarding Modal -->
  <div class="modal-overlay" id="onboarding-modal" style="display: none;">
    <div class="modal">
      <div class="modal-header">
        <h2>Welcome to Aurora Compile</h2>
        <button class="modal-close" id="close-onboarding">
          <svg viewBox="0 0 24 24" class="icon">
            <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2"/>
          </svg>
        </button>
      </div>
      <div class="modal-content">
        <p class="modal-intro">Write HTML, CSS, JS ‚Äî click Run to preview, Build to compile, Export to download ready-to-serve files.</p>
        
        <div class="shortcuts-grid">
          <div class="shortcut-item">
            <kbd>Ctrl/Cmd + Enter</kbd>
            <span>Run Preview</span>
          </div>
          <div class="shortcut-item">
            <kbd>Ctrl/Cmd + S</kbd>
            <span>Save Project</span>
          </div>
          <div class="shortcut-item">
            <kbd>Ctrl/Cmd + E</kbd>
            <span>Export Project</span>
          </div>
          <div class="shortcut-item">
            <kbd>Ctrl/Cmd + /</kbd>
            <span>Toggle Comment</span>
          </div>
        </div>

        <div class="onboarding-actions">
          <button class="btn btn-secondary" id="load-template">Load Template</button>
          <button class="btn btn-primary" id="start-coding">Start Coding</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Templates Modal -->
  <div class="modal-overlay" id="templates-modal" style="display: none;">
    <div class="modal modal-large">
      <div class="modal-header">
        <h2>Project Templates</h2>
        <button class="modal-close" id="close-templates">
          <svg viewBox="0 0 24 24" class="icon">
            <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2"/>
          </svg>
        </button>
      </div>
      <div class="modal-content">
        <div class="templates-grid">
          <div class="template-card" data-template="blank">
            <div class="template-preview">
              <div class="template-icon">üìÑ</div>
            </div>
            <h3>Blank Project</h3>
            <p>Start with empty HTML, CSS, and JS files</p>
          </div>
          
          <div class="template-card" data-template="vanilla-spa">
            <div class="template-preview">
              <div class="template-icon">üåê</div>
            </div>  
            <h3>Vanilla SPA</h3>
            <p>Single-page app with routing and ES modules</p>
          </div>
          
          <div class="template-card" data-template="react-cdn">
            <div class="template-preview">
              <div class="template-icon">‚öõÔ∏è</div>
            </div>
            <h3>React CDN</h3>
            <p>React app loaded via CDN with Babel</p>
          </div>
          
          <div class="template-card" data-template="landing-page">
            <div class="template-preview">
              <div class="template-icon">üöÄ</div>
            </div>
            <h3>Landing Page</h3>
            <p>Modern landing page with hero section</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- New File Modal -->
  <div class="modal-overlay" id="new-file-modal" style="display: none;">
    <div class="modal modal-small">
      <div class="modal-header">
        <h2>New File</h2>
        <button class="modal-close" id="close-new-file">
          <svg viewBox="0 0 24 24" class="icon">
            <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2"/>
          </svg>
        </button>
      </div>
      <div class="modal-content">
        <div class="form-group">
          <label for="file-name-input">File name:</label>
          <input type="text" id="file-name-input" placeholder="example.js" class="form-input">
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="cancel-new-file">Cancel</button>
          <button class="btn btn-primary" id="create-file">Create</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Hidden file input -->
  <input type="file" id="file-input" style="display: none;" multiple accept=".html,.css,.js,.json,.md">

  <!-- Loading Indicator -->
  <div class="loading-overlay" id="loading-overlay" style="display: none;">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Building your project...</p>
    </div>
  </div>

 <!-- Draggable Logo Icon -->
<div id="logo-icon" class="logo-icon">
  <img src="icon.png" alt="Aurora Logo" draggable="false">
</div>
<script src="logo-drag.js"></script>

  
  <!-- Scripts -->
  <script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>
  <script src="https://unpkg.com/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="script.js"></script>
</body>
</html>